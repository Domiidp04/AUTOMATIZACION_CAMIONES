/* === Layout general del popup === */
body {
  width: 320px; /* un pelín más ancho */
  padding: 15px;
  font-family: Arial, sans-serif;
  background: #f5f5f5;
}

.container {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

h1 {
  color: #333;
  margin: 0 0 15px 0;
  font-size: 18px;
  text-align: center;
}

select,
input {
  width: 100%;
  padding: 8px;
  margin: 5px 0;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
}

label {
  font-weight: bold;
  color: #555;
  display: block;
  margin-top: 10px;
}

/* === Panel de automatización / estado === */
.automation-panel {
  background: #f8f9fa;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 15px;
  margin-top: 15px;
  display: none;
}

.automation-panel h3 {
  margin: 0 0 10px 0;
  color: #333;
  font-size: 14px;
}

.status {
  padding: 8px;
  border-radius: 4px;
  background: #e9ecef;
  text-align: center;
  margin: 10px 0;
  font-size: 12px;
}

.status.running {
  background: #fff3cd;
}
.status.success {
  background: #d4edda;
}
.status.error {
  background: #f8d7da;
}

/* Contenedor de botones de automatización */
.control-buttons {
  display: flex;
  gap: 6px;
  margin: 10px 0;
}

/* Botón de control genérico */
.control-btn {
  flex: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: background-color 0.15s ease, box-shadow 0.15s ease,
    transform 0.08s ease;
  white-space: nowrap;
}

/* Icono dentro del botón */
.control-btn .material-symbols-outlined {
  font-size: 18px;
  line-height: 1;
}

/* Colores por acción */
.control-btn--start {
  background: #007cba;
}
.control-btn--start:hover {
  background: #005a9c;
}

.control-btn--stop {
  background: #dc3545;
}
.control-btn--stop:hover {
  background: #c82333;
}

.control-btn--reset {
  background: #6c757d;
}
.control-btn--reset:hover {
  background: #545b62;
}

/* Efecto pulsado */
.control-btn:active {
  transform: translateY(1px) scale(0.98);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
}

.log {
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 8px;
  max-height: 120px;
  overflow-y: auto;
  font-size: 11px;
  margin-top: 10px;
}

.log-entry {
  padding: 2px 0;
  border-bottom: 1px solid #eee;
}

.log-entry:last-child {
  border-bottom: none;
}

.progress {
  background: #e9ecef;
  border-radius: 4px;
  height: 8px;
  margin: 10px 0;
  overflow: hidden;
  display: none;
}

.progress-bar {
  background: #007cba;
  height: 100%;
  width: 0%;
  transition: width 0.3s;
}

.queue-status {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 4px;
  padding: 8px;
  margin: 10px 0;
  font-size: 12px;
  display: none;
}

.queue-status.active {
  display: block;
}

.current-processing {
  font-weight: bold;
  color: #007cba;
}

/* === Lista de vehículos / checkboxes === */

/* Contenedor de la lista de vehículos */
.vehicle-list {
  max-height: 260px; /* más alto para ver más filas */
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: #fff;
  padding: 0;
  box-sizing: border-box;
  font-size: 11px;
}

/* Placeholder cuando todavía no hay vehículos */
.vehicle-placeholder {
  padding: 6px 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: #f8f9fa;
  color: #6c757d;
  font-size: 11px;
}

/* Fila genérica de vehículo – la usamos como <label> clicable */
.vehicle-item {
  display: flex;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  padding: 2px 6px;
  margin: 0; /* sobrescribe margin-top de label */
  border-bottom: 1px solid #eee;
  cursor: pointer;
  transition: background 0.15s;
  min-height: 18px;
  user-select: none;
}

.vehicle-item:hover {
  background: #f1f3f5;
}

.vehicle-item:last-child {
  border-bottom: none;
}

/* Checkbox reducido */
.vehicle-checkbox {
  margin-right: 6px;
  width: 14px;
  height: 14px;
  flex: 0 0 auto;
}

/* Texto del código del vehículo */
.vehicle-code {
  flex: 1 1 auto;
  font-size: 11px;
}

/* Fila "Seleccionar todos" – también es <label> */
.select-all-container {
  position: sticky;
  top: 0;
  z-index: 1;
  display: flex;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  background: #f8f9fa;
  border-bottom: 1px solid #ddd;
  padding: 4px 6px;
  margin: 0; /* sobrescribe margin-top de label */
  font-weight: bold;
  font-size: 11px;
  cursor: pointer;
  user-select: none;
}

.select-all-container input[type="checkbox"] {
  margin-right: 6px;
}

.select-all-container span {
  flex: 1 1 auto;
}

/* Info de selección (debajo de la lista) */
.selection-info {
  background: #e9ecef;
  padding: 5px 8px;
  border-radius: 4px;
  font-size: 12px;
  margin-top: 5px;
  display: none;
}

.selection-info #selected-count {
  font-weight: 700;
}

.btn-clear {
  float: right;
  background: #6c757d;
  color: #fff;
  border: none;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
}
.btn-clear:hover {
  background: #545b62;
}

/* === Botones principales con Material Symbols === */

/* Fuente de iconos */
.material-symbols-outlined {
  font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
}

/* Contenedor de botones principales */
.buttons {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  margin: 10px 0;
}

/* Botón icono genérico */
.icon-button {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  background: #e9ecef;
  color: #ffffff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
  transition: background-color 0.15s ease, box-shadow 0.15s ease,
    transform 0.08s ease;
}

.icon-button .material-symbols-outlined {
  font-size: 22px;
}

/* Colores por acción */
.icon-button--add {
  background: #22c55e; /* verde */
}
.icon-button--add:hover {
  background: #16a34a;
}

.icon-button--delete {
  background: #ef4444; /* rojo */
}
.icon-button--delete:hover {
  background: #dc2626;
}

.icon-button--edit {
  background: #f59e0b; /* amarillo/naranja */
}
.icon-button--edit:hover {
  background: #d97706;
}

.icon-button--loop {
  background: #3b82f6; /* azul */
}
.icon-button--loop:hover {
  background: #2563eb;
}

/* Efecto común hover / active */
.icon-button:hover {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
}

.icon-button:active {
  transform: translateY(1px) scale(0.98);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* ===== Panel de automatización mejorado ===== */

.automation-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.automation-icon {
  font-size: 26px;
  color: #3b82f6;
  background: #e0f2fe;
  border-radius: 999px;
  padding: 4px;
}

.automation-header-text h3 {
  margin: 0;
  font-size: 14px;
  color: #111827;
}

.automation-subtitle {
  font-size: 11px;
  color: #6b7280;
}

/* Status con icono centrado */
.status span {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.status-icon {
  font-size: 16px;
}

/* Cola de procesamiento */
.queue-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.queue-icon {
  font-size: 18px;
  color: #d97706;
}

#queue-info {
  display: flex;
  flex-wrap: wrap;
  gap: 2px 6px;
  font-size: 11px;
}

.queue-remaining {
  color: #4b5563;
}

/* Botones de control con iconos */
.control-buttons {
  display: flex;
  gap: 6px;
  margin: 10px 0;
}

.control-buttons .control-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-size: 12px;
  padding: 7px 8px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  color: #ffffff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: background-color 0.15s ease, box-shadow 0.15s ease,
    transform 0.07s ease;
}

.control-buttons .control-btn .material-symbols-outlined {
  font-size: 18px;
}

/* Colores por acción */
.control-btn--start {
  background: #22c55e;
}
.control-btn--start:hover {
  background: #16a34a;
}

.control-btn--stop {
  background: #ef4444;
}
.control-btn--stop:hover {
  background: #dc2626;
}

.control-btn--reset {
  background: #6b7280;
}
.control-btn--reset:hover {
  background: #4b5563;
}

/* Efecto común hover / active */
.control-buttons .control-btn:hover {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
}

.control-buttons .control-btn:active {
  transform: translateY(1px) scale(0.98);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
}

/* Botones de control (ya los tendrás, lo importante es NO usar display en JS) */
.control-buttons {
  display: flex;
  gap: 6px;
  margin: 10px 0;
}

.control-btn {
  flex: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: background-color 0.15s ease, box-shadow 0.15s ease,
    transform 0.08s ease;
  white-space: nowrap;
}

.control-btn .material-symbols-outlined {
  font-size: 18px;
  line-height: 1;
}

/* Colores */
.control-btn--start {
  background: #007cba;
}
.control-btn--start:hover {
  background: #005a9c;
}

.control-btn--stop {
  background: #dc3545;
}
.control-btn--stop:hover {
  background: #c82333;
}

.control-btn--reset {
  background: #6c757d;
}
.control-btn--reset:hover {
  background: #545b62;
}

/* Ocultar/mostrar sin romper el display:flex */
.hidden {
  display: none !important;
}
